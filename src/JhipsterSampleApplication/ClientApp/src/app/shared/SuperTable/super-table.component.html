<!-- super-table.component.html -->
<p-table
  [value]="value"
  [columns]="columns"
  dataKey="id"
  [expandedRowKeys]="expandedRowKeys"
  (onColResize)="onColResize.emit($event)"
  (onRowExpand)="onRowExpand.emit($event)"
  (onRowCollapse)="onRowCollapse.emit($event)">
  <ng-template pTemplate="header" let-columns>
    <tr>
      <th *ngFor="let col of columns"
          pSortableColumn="{{ col.field }}"
          pResizableColumn
      >
        {{ col.header }}
        <p-sortIcon [field]="col.field"></p-sortIcon>
        <p-columnFilter [field]="col.field" display="menu"></p-columnFilter>
      </th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-rowData let-columns="columns" let-expanded="expanded">
    <tr>
      <td>
        <button pButton icon="pi pi-chevron-down"
                (click)="toggleRow(rowData)"
                [ngClass]="{ 'rotated': expanded }">
        </button>
      </td>
      <td *ngFor="let col of columns">{{ rowData[col.field] }}</td>
    </tr>
  </ng-template>

  <ng-template pTemplate="rowexpansion" let-rowData>
    <p-table 
        [value]="value"
        [columns]="columns"
        [resizableColumns]="resizableColumns"
        [reorderableColumns]="reorderableColumns"
        [scrollable]="scrollable"
        [paginator]="paginator"
        [dataKey]="dataKey"
        [globalFilterFields]="globalFilterFields"
        [(contextMenuSelection)]="contextMenuSelection"
        [contextMenu]="contextMenu"
        [selectionMode]="selectionMode"
        [(selection)]="selection"
        [expandedRowKeys]="expandedRowKeys"
        (onRowExpand)="onRowExpand.emit($event)"
        (onRowCollapse)="onRowCollapse.emit($event)"
        (selectionChange)="selectionChange.emit($event)"
        (onContextMenuSelect)="onContextMenuSelect.emit($event)"
    >

      <ng-template pTemplate="body" let-detail>
        <tr>
          <td>{{ detail.label }}: {{ detail.value }}</td>
        </tr>
      </ng-template>
    </p-table>
  </ng-template>
</p-table>
