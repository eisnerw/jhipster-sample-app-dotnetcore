:host ::ng-deep {
  .p-button.p-button-text.p-button-rounded.p-button-plain {
    width: 2rem;
    height: 2rem;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;

    .p-button-icon {
      font-size: 10px;
      color: var(--text-color);
    }

    &:hover {
      background: var(--surface-hover);
    }
  }

  .pi {
    font-family: "PrimeIcons" !important;
  }

  .group-count {
    margin-left: 0.5rem;
    color: var(--text-color-secondary, #6c757d);
  }

  .group-toggle-icon {
    font-size: 10px;
  }

  .cell-content {
    display: block;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .header-cell {
    position: relative;
    min-height: 32px;
  }

  .header-text {
    padding-right: 0.5rem;
  }

  .sort-icon {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);

    .p-sortable-column-icon {
      font-size: 10px;
    }
  }

  .filter-button {
    position: absolute;
    right: 0;

    .p-column-filter-menu-button {
      width: 1rem;
      height: 1rem;
      font-size: 10px;
    }
  }
}

/* Scope header typography to SuperTable only */
:host ::ng-deep .p-datatable thead th {
  font-size: 13px !important;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol" !important;
}
:host ::ng-deep .p-datatable thead th .header-text {
  font-size: inherit !important;
  font-family: inherit !important;
}

/* "Loadingâ€¦" / "No hits" message row: make it look like body rows */
:host ::ng-deep .loading-row td {
  /* Gridlines to match body cells */
  border-bottom: 1px solid var(--surface-border, #dee2e6);
  border-left: 1px solid var(--surface-border, #dee2e6);
  border-right: 1px solid var(--surface-border, #dee2e6);

  /* Typography consistent with data cells */
  font-size: 12px !important;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol" !important;
  font-weight: 400;
  color: #333333;

  /* Match data-row height exactly (22px overall) */
  height: 22px;
  line-height: 22px;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px; /* align with first column content */
  padding-right: 4px;

  /* Ensure header background does not bleed; mimic body background */
  background: var(--surface-card, #ffffff);
  text-align: left;
}

/* Checkboxes: center vertically; body rows nudged down slightly */
:host ::ng-deep td > p-tablecheckbox,
:host ::ng-deep td > p-tableHeaderCheckbox,
:host ::ng-deep th > div > p-tableHeaderCheckbox {
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Lower body-row checkboxes a touch for visual centering */
/* Nudge body-row checkboxes down slightly (PrimeNG places them a bit high) */
:host ::ng-deep .p-datatable-tbody td p-tablecheckbox .p-checkbox {
  transform: translateY(2px) !important;
}
/* Extra safeguard: nudge the visible box as well in case inner box is measured */
:host ::ng-deep .p-datatable-tbody td p-tablecheckbox .p-checkbox .p-checkbox-box {
  margin-top: 1px !important;
}

/* Vertically center header contents (including header checkbox) */
:host ::ng-deep .header-cell {
  display: flex;
  align-items: center;
}

/* Center header checkbox horizontally and fine-tune position */
:host ::ng-deep thead th p-tableHeaderCheckbox {
  display: flex;
  margin-left: auto;
  margin-right: auto;
}
:host ::ng-deep thead th p-tableHeaderCheckbox .p-checkbox {
  transform: translate(-2px, 2px) !important; /* shift slightly left and down */
}
.st-resize-handle {
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 6px;
  cursor: col-resize;
  user-select: none;
  z-index: 2;
  border-right: 1px solid var(--surface-border, #dee2e6);
}
.st-resize-handle:hover {
  background: rgba(0,0,0,0.06);
}

:host ::ng-deep .header-cell {
  position: relative;
}

:host ::ng-deep .p-datatable thead th {
  position: relative;
}

/* Numeric columns: right-align body, keep header left-aligned */
:host ::ng-deep td.numeric-cell { text-align: right; }
:host ::ng-deep th.numeric-header { text-align: left; }

.st-resizing * {
  cursor: col-resize !important;
  user-select: none !important;
}

/* Category row highlight */
:host ::ng-deep .row-has-category {
  box-shadow: inset 3px 0 0 0 var(--primary-color, #0d6efd);
}

/* Category pill via CSS ::before to avoid layout shifts */
:host ::ng-deep td[data-catcount] {
  position: relative;
  padding-left: 1rem;
}
:host ::ng-deep td[data-catcount] .cat-pill {
  position: absolute;
  left: 2px;
  top: 50%;
  transform: translateY(-50%);
  display: inline-block;
  min-width: 0.9rem; /* ~14px */
  height: 0.75rem; /* 12px */
  line-height: 0.75rem;
  padding: 0 0.25rem;
  border-radius: 0.5rem;
  background: var(--primary-200, #cfe2ff);
  color: var(--primary-800, #052c65);
  font-size: 0.6rem;
  text-align: center;
}

/* Ensure text shifts right and stays single-line with ellipsis when pill is present */
:host ::ng-deep td[data-catcount] .cell-content {
  display: inline-block !important;
  margin-left: 1rem !important;
  min-width: 0;
}

/* PrimeNG tooltip styling for categories */
:host ::ng-deep .cat-tooltip {
  white-space: pre-wrap;
  max-width: 24rem;
  font-size: 0.75rem;
}

/* Smaller tooltip text for general cell hover callouts */
:host ::ng-deep .cell-tooltip .p-tooltip-text {
  font-size: 0.75rem; /* ~12px */
  line-height: 1.25;
  padding: 0.25rem 0.375rem;
  color: #ffffff; /* local consistency; global has !important */
}

/* Body row typography */
:host ::ng-deep .p-datatable .p-datatable-tbody td {
  font-size: 12px !important;
  color: #333333;
  font-weight: 400;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol" !important;
}
